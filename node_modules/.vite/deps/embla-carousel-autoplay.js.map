{"version":3,"file":"embla-carousel-autoplay.js","names":[],"sources":["../../embla-carousel-autoplay/esm/embla-carousel-autoplay.esm.js"],"sourcesContent":["const defaultOptions = {\n  active: true,\n  breakpoints: {},\n  delay: 4000,\n  jump: false,\n  playOnInit: true,\n  stopOnFocusIn: true,\n  stopOnInteraction: true,\n  stopOnMouseEnter: false,\n  stopOnLastSnap: false,\n  rootNode: null\n};\n\nfunction normalizeDelay(emblaApi, delay) {\n  const scrollSnaps = emblaApi.scrollSnapList();\n  if (typeof delay === 'number') {\n    return scrollSnaps.map(() => delay);\n  }\n  return delay(scrollSnaps, emblaApi);\n}\nfunction getAutoplayRootNode(emblaApi, rootNode) {\n  const emblaRootNode = emblaApi.rootNode();\n  return rootNode && rootNode(emblaRootNode) || emblaRootNode;\n}\n\nfunction Autoplay(userOptions = {}) {\n  let options;\n  let emblaApi;\n  let destroyed;\n  let delay;\n  let timerStartTime = null;\n  let timerId = 0;\n  let autoplayActive = false;\n  let mouseIsOver = false;\n  let playOnDocumentVisible = false;\n  let jump = false;\n  function init(emblaApiInstance, optionsHandler) {\n    emblaApi = emblaApiInstance;\n    const {\n      mergeOptions,\n      optionsAtMedia\n    } = optionsHandler;\n    const optionsBase = mergeOptions(defaultOptions, Autoplay.globalOptions);\n    const allOptions = mergeOptions(optionsBase, userOptions);\n    options = optionsAtMedia(allOptions);\n    if (emblaApi.scrollSnapList().length <= 1) return;\n    jump = options.jump;\n    destroyed = false;\n    delay = normalizeDelay(emblaApi, options.delay);\n    const {\n      eventStore,\n      ownerDocument\n    } = emblaApi.internalEngine();\n    const isDraggable = !!emblaApi.internalEngine().options.watchDrag;\n    const root = getAutoplayRootNode(emblaApi, options.rootNode);\n    eventStore.add(ownerDocument, 'visibilitychange', visibilityChange);\n    if (isDraggable) {\n      emblaApi.on('pointerDown', pointerDown);\n    }\n    if (isDraggable && !options.stopOnInteraction) {\n      emblaApi.on('pointerUp', pointerUp);\n    }\n    if (options.stopOnMouseEnter) {\n      eventStore.add(root, 'mouseenter', mouseEnter);\n    }\n    if (options.stopOnMouseEnter && !options.stopOnInteraction) {\n      eventStore.add(root, 'mouseleave', mouseLeave);\n    }\n    if (options.stopOnFocusIn) {\n      emblaApi.on('slideFocusStart', stopAutoplay);\n    }\n    if (options.stopOnFocusIn && !options.stopOnInteraction) {\n      eventStore.add(emblaApi.containerNode(), 'focusout', startAutoplay);\n    }\n    if (options.playOnInit) startAutoplay();\n  }\n  function destroy() {\n    emblaApi.off('pointerDown', pointerDown).off('pointerUp', pointerUp).off('slideFocusStart', stopAutoplay);\n    stopAutoplay();\n    destroyed = true;\n    autoplayActive = false;\n  }\n  function setTimer() {\n    const {\n      ownerWindow\n    } = emblaApi.internalEngine();\n    ownerWindow.clearTimeout(timerId);\n    timerId = ownerWindow.setTimeout(next, delay[emblaApi.selectedScrollSnap()]);\n    timerStartTime = new Date().getTime();\n    emblaApi.emit('autoplay:timerset');\n  }\n  function clearTimer() {\n    const {\n      ownerWindow\n    } = emblaApi.internalEngine();\n    ownerWindow.clearTimeout(timerId);\n    timerId = 0;\n    timerStartTime = null;\n    emblaApi.emit('autoplay:timerstopped');\n  }\n  function startAutoplay() {\n    if (destroyed) return;\n    if (documentIsHidden()) {\n      playOnDocumentVisible = true;\n      return;\n    }\n    if (!autoplayActive) emblaApi.emit('autoplay:play');\n    setTimer();\n    autoplayActive = true;\n  }\n  function stopAutoplay() {\n    if (destroyed) return;\n    if (autoplayActive) emblaApi.emit('autoplay:stop');\n    clearTimer();\n    autoplayActive = false;\n  }\n  function visibilityChange() {\n    if (documentIsHidden()) {\n      playOnDocumentVisible = autoplayActive;\n      return stopAutoplay();\n    }\n    if (playOnDocumentVisible) startAutoplay();\n  }\n  function documentIsHidden() {\n    const {\n      ownerDocument\n    } = emblaApi.internalEngine();\n    return ownerDocument.visibilityState === 'hidden';\n  }\n  function pointerDown() {\n    if (!mouseIsOver) stopAutoplay();\n  }\n  function pointerUp() {\n    if (!mouseIsOver) startAutoplay();\n  }\n  function mouseEnter() {\n    mouseIsOver = true;\n    stopAutoplay();\n  }\n  function mouseLeave() {\n    mouseIsOver = false;\n    startAutoplay();\n  }\n  function play(jumpOverride) {\n    if (typeof jumpOverride !== 'undefined') jump = jumpOverride;\n    startAutoplay();\n  }\n  function stop() {\n    if (autoplayActive) stopAutoplay();\n  }\n  function reset() {\n    if (autoplayActive) startAutoplay();\n  }\n  function isPlaying() {\n    return autoplayActive;\n  }\n  function next() {\n    const {\n      index\n    } = emblaApi.internalEngine();\n    const nextIndex = index.clone().add(1).get();\n    const lastIndex = emblaApi.scrollSnapList().length - 1;\n    const kill = options.stopOnLastSnap && nextIndex === lastIndex;\n    if (emblaApi.canScrollNext()) {\n      emblaApi.scrollNext(jump);\n    } else {\n      emblaApi.scrollTo(0, jump);\n    }\n    emblaApi.emit('autoplay:select');\n    if (kill) return stopAutoplay();\n    startAutoplay();\n  }\n  function timeUntilNext() {\n    if (!timerStartTime) return null;\n    const currentDelay = delay[emblaApi.selectedScrollSnap()];\n    const timePastSinceStart = new Date().getTime() - timerStartTime;\n    return currentDelay - timePastSinceStart;\n  }\n  const self = {\n    name: 'autoplay',\n    options: userOptions,\n    init,\n    destroy,\n    play,\n    stop,\n    reset,\n    isPlaying,\n    timeUntilNext\n  };\n  return self;\n}\nAutoplay.globalOptions = undefined;\n\nexport { Autoplay as default };\n//# sourceMappingURL=embla-carousel-autoplay.esm.js.map\n"],"mappings":"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"}